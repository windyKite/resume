<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的简历</title>
    <link rel="stylesheet" href="./css/loading.css">
    <link rel="stylesheet" href="./css/index.css">
    
    <style type="text/css">
        .icon {
           width: 1em; height: 1em;
           vertical-align: -0.15em;
           fill: currentColor;
           overflow: hidden;
        }
    </style>
</head>

<body>
    <div  id="siteWelcome" class="siteWelcome active">
        <div class="loading"></div>
    </div>
    <div id="topNavBar" class="topNavBar">
        <div class="inner clearfix">
        <a href="#" class="logo clearfix">
            <span class="rs">RS</span><span class="card">card</span>
        </a>
            <nav> 
                <ul class="clearfix">
                    <li>
                        <a href="#about">关于</a>
                    </li>
                    <li>
                        <a href="#skills">技能</a>
                    </li>
                    <li data-hasSubmenu>
                        <a href="#works">作品集</a>
                        <ul class="submenu">
                            <li>作品1</li>
                            <li>作品2</li>
                            <li>作品3</li>
                        </ul>
                    </li>
                    <li data-hasSubmenu>
                        <a href="#blogs">博客</a>
                        <ul class="submenu">
                            <li>博客1</li>
                            <li>博客2</li>
                            <li>博客3</li>
                        </ul>
                    </li>
                    <li>
                        <a href="#calendar">日历</a>
                    </li>
                    <li>
                        <a href="#contact" >联系方式</a>
                    </li>
                    <li>
                        <a href="#other" >其他</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="banner" style="background-image:url(./img/rs-cover.jpg);">
        <div class="mask"></div>
    </div>
    <main>
        <div data-anchor id="about" class="userCard offset">
            <div class="profile clearfix">
                <div class="picture">
                    <img src="./img/avatar.jpg" alt="头像">
                </div>
                <div class="text clearfix">
                    <span class="welcome">Hello
                        <span class="triangle"></span>
                    </span>
                    <h1>萧泳森</h1>
                    <p>前端开发工程师</p>
                    <hr>
                    <dl>
                        <dt>年龄</dt>
                        <dd>22</dd>
                        <dt>所在城市</dt>
                        <dd>广州</dd>
                        <dt>邮箱</dt>
                        <dd>603540681@qq.com</dd>
                        <dt>手机</dt>
                        <dd>18826132439</dd>
                    </dl>
                </div>
            </div>
            <footer>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-github"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-weibo2"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-qq"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-tuitetwitter43"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-weixin"></use>
                    </svg>
                </a>
            </footer>
        </div>
        <p class="downloadResume-wrapper">
            <a href="#" class="downloadResume" target="_blank" download>下载 PDF 简历</a>
        </p>
        <p class="selfIntroduction">萧泳森，前端技术学习者。学无止境，永远向前。<br>技能：HTML、CSS、JavaScript、</p>
    </main>
    <section data-anchor id="skills" class="skills offset">
        <h2>技能</h2>
        <ul class="clearfix">
            <li>
                <h3>HTML5 &amp; CSS3</h3>
                <div class="progressBar">
                    <div class="progress" style="width:33%;"></div>
                </div>
            </li>
            <li>
                <h3>Node.js</h3>
                <div class="progressBar">
                    <div class="progress" style="width:22%;"></div>
                </div>
            </li>
            <li>
                <h3>JavaScript</h3>
                <div class="progressBar">
                    <div class="progress" style="width:77%;"></div>
                </div>
            </li>
            <li>
                <h3>JQuery</h3>
                <div class="progressBar">
                    <div class="progress" style="width:75%;"></div>
                </div>
            </li>
            <li>
                <h3>Vue.js</h3>
                <div class="progressBar">
                    <div class="progress" style="width:55%;"></div>
                </div>
            </li>
            <li>
                <h3>React.js</h3>
                <div class="progressBar">
                    <div class="progress" style="width:60%;"></div>
                </div>
            </li>
        </ul>
    </section>
    <section data-anchor id="works" class="portfolio offset">
        <h2>作品集</h2>
        <nav>
            <ul class="clearfix">
                <li id="portfolioAll">所有</li>
                <li id="portfolioFrame">框架</li>
                <li id="portfolioVallina">原生JS &amp; CSS</li>
            </ul>
            <div id="portfolioBar" class="bar state-1">
                <div class="bar-inner"></div>
            </div>
        </nav>
        <script>
            portfolioAll.onclick= function(){
                portfolioBar.className = 'bar state-1'
            }
            portfolioFrame.onclick= function(){
                portfolioBar.className = 'bar state-2'
            }
            portfolioVallina.onclick= function(){
                portfolioBar.className = 'bar state-3'
            }
          </script>
        <div class="works" style="height:597px;">
            <div class="big" style="top:0;left:0;">
                <img src="./img/1.jpg" alt="work1">
            </div>
            <div class="small" style="top:0;left:646px;">
                <img src="./img/2.jpg" alt="work2">                   
            </div>
            <div class="small" style="top:312px;left:646px;">
                <img src="./img/3.jpg" alt="work1">                    
            </div>
        </div>
    </section>
    <script src="//at.alicdn.com/t/font_453456_c3et2m4bdlipy14i.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
    <script>
        document.getElementById('siteWelcome').classList.remove('active')
        window.onscroll = function(){
            if(window.scrollY > 0) {
                topNavBar.classList.add('sticky')
            } else {
                topNavBar.classList.remove('sticky')
            }
            //  滚动时自动高亮导航栏
            // 1. 算出导航的目标点的位置 offsetTop 并求出离滚动时距离最近的目标点 special[minIndex]
            let specialTags = document.querySelectorAll('[data-anchor]')
            let minIndex = 0
            for(let i = 0;i < specialTags.length;i++){
                if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY )) {
                    minIndex = i;         
                } 
            }
            
            if(specialTags[minIndex].id == 'skills'){
                specialTags[minIndex].classList.add('active')
            }
        
            specialTags[minIndex].classList.remove('offset')
            // 2. 给该目标点的导航栏高亮
            let id = specialTags[minIndex].id
            let a = document.querySelector('[href="#' + id + '"]')
            let li = a.parentNode
            let allLi = li.parentNode.children
            for(let i = 0;i < allLi.length;i++){
                allLi[i].classList.remove('highlight')
            }
            li.classList.add('highlight')
        }

        // li 滑动效果
        var liTags = document.querySelectorAll('.topNavBar nav > ul > li')
        for(let i = 0;i < liTags.length;i++){
            liTags[i].onmouseenter = function(e){       
                liTags[i].classList.add('active')
            }
            liTags[i].onmouseleave = function(){          
                liTags[i].classList.remove('active')
            }   
        }
        
        // 导航动画
        function animate(time) {
            requestAnimationFrame(animate);
            TWEEN.update(time);
        }
        requestAnimationFrame(animate);
        
        let aTags = document.querySelectorAll('.topNavBar nav > ul > li > a')    
        for(let i = 0; i < aTags.length;i++){
            aTags[i].onclick = function(e){
                var currentTop = window.scrollY
                var targetTop = document.querySelector(e.currentTarget.getAttribute('href')).offsetTop - 80
                var time = Math.abs(Math.abs(currentTop - targetTop)/100*300)
                if(time > 500){time = 500}
                var coords = { y: currentTop }; 
                var tween = new TWEEN.Tween(coords)
                .to({ y: targetTop }, time) 
                .easing(TWEEN.Easing.Quadratic.InOut) 
                .onUpdate(function() { 
                    window.scrollTo(0, coords.y)
                    console.log(coords.y)
                })
                .start(); 
                    }
                }
    </script>
</body>

</html>